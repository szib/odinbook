<div class="d-flex flex-column bg-light m-2 pb-1 border border-secondary rounded justify-content-center">

  <div class="d-flex p-2 flex-row bg-secondary rounded-top text-light justify-content-between font-weight-bold">
    <div class="p-1 mx-3">
      <%= post.author.profile.full_name %>
    </div>
    <div class="p-1 mx-3">
      <%= "#{time_ago_in_words(post.created_at)} ago" %>
    </div>
  </div>

  <div class="d-flex px-3 mt-2 justify-content-center text-justify">
    <%= post.content %>
  </div>

  <div class="d-flex pt-1 px-1 flex-row justify-content-between">

    <% if post.author == current_user %>
      <div class="d-inline-flex">
        <div class="p-0 px-1">
          <%= link_to 'Edit', edit_post_path(post), class: 'btn btn-sm btn-primary' %>
        </div>
        <div class="p-0 px-1">
          <%= link_to 'Delete', post, method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-sm btn-danger' %>
        </div>
      </div>
    <% end %>

    <div class="d-inline-flex">
      <div class="p-0 px-1 pt-1 ml-auto">
        <%= like_sentence(post.likes.count) %>
      </div>
      <div class="p-0 px-1">
        <% if post.likes.pluck(:user_id).include?(current_user.id) %>
          <%= link_to 'Unlike', post_like_path(post.id), method: :delete, class: 'btn btn-sm btn-primary' %>
        <% else %>
          <%= link_to 'Like', post_like_path(post.id), method: :post, class: 'btn btn-sm btn-primary' %>
        <% end %>
      </div>
    </div>

  </div>

  <%= render 'shared/comments', comments: post.comments %>
  <%= render 'comments/form', post: post %>

</div>
